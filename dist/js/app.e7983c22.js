(function(){"use strict";var t={6191:function(t,e,o){var r=o(5130),n=o(6768),s=o(4232);const a={id:"app",class:"min-h-screen bg-gray-50 p-6 font-inter"},l={class:"container mx-auto"},c={key:0,class:"text-center text-gray-600 text-lg"},u={key:1,class:"text-center text-red-600 text-lg"},i={key:2,class:"text-center text-gray-600 text-lg"},b={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"};function d(t,e,o,r,d,f){const p=(0,n.g2)("RobotCard");return(0,n.uX)(),(0,n.CE)("div",a,[e[0]||(e[0]=(0,n.Lk)("header",{class:"text-center mb-10"},[(0,n.Lk)("h1",{class:"text-4xl font-extrabold text-blue-800 tracking-tight"}," 실시간 로봇 모니터링 대시보드 "),(0,n.Lk)("p",{class:"text-lg text-gray-600 mt-2"},"Redis Pub/Sub 및 WebSocket을 활용한 실시간 업데이트")],-1)),(0,n.Lk)("main",l,[r.loading?((0,n.uX)(),(0,n.CE)("div",c," 로봇 데이터를 불러오는 중... ")):r.error?((0,n.uX)(),(0,n.CE)("div",u," 오류 발생: "+(0,s.v_)(r.error),1)):0===Object.keys(r.robots).length?((0,n.uX)(),(0,n.CE)("div",i," 현재 로봇 데이터가 없습니다. 시뮬레이터를 실행해주세요. ")):((0,n.uX)(),(0,n.CE)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.sortedRobots,t=>((0,n.uX)(),(0,n.Wv)(p,{key:t.botId,robot:t},null,8,["robot"]))),128))]))]),e[1]||(e[1]=(0,n.Lk)("footer",{class:"text-center mt-12 text-gray-500 text-sm"},[(0,n.Lk)("p",null,"© 2024 실시간 로봇 모니터링. 모든 권리 보유.")],-1))])}o(8111),o(7588);var f=o(144);const p={class:"text-xl font-bold mb-2"},g={class:"text-gray-700 mb-1"},v={class:"text-gray-700 mb-1"},k={class:"text-gray-700 mb-1"},x={class:"text-gray-700 text-sm"};function y(t,e,o,r,a,l){return(0,n.uX)(),(0,n.CE)("div",{class:(0,s.C4)([r.cardClasses,"rounded-lg shadow-md p-6 m-4 transition-all duration-300 ease-in-out transform hover:scale-105"])},[(0,n.Lk)("h3",p,(0,s.v_)(o.robot.botName),1),(0,n.Lk)("p",g,[e[0]||(e[0]=(0,n.Lk)("span",{class:"font-semibold"},"ID:",-1)),(0,n.eW)(" "+(0,s.v_)(o.robot.botId),1)]),(0,n.Lk)("p",v,[e[1]||(e[1]=(0,n.Lk)("span",{class:"font-semibold"},"상태:",-1)),(0,n.Lk)("span",{class:(0,s.C4)(r.statusClasses)},(0,s.v_)(o.robot.status),3)]),(0,n.Lk)("p",k,[e[2]||(e[2]=(0,n.Lk)("span",{class:"font-semibold"},"위치:",-1)),(0,n.eW)(" "+(0,s.v_)(o.robot.location),1)]),(0,n.Lk)("p",x,[e[3]||(e[3]=(0,n.Lk)("span",{class:"font-semibold"},"최종 업데이트:",-1)),(0,n.eW)(" "+(0,s.v_)(r.formattedLastUpdated),1)])],2)}var h={name:"RobotCard",props:{robot:{type:Object,required:!0}},setup(t){const e=(0,n.EW)(()=>{switch(t.robot.status){case"WORKING":return"bg-green-100 border-l-4 border-green-500";case"MOVING":return"bg-blue-100 border-l-4 border-blue-500";case"INREST":return"bg-yellow-100 border-l-4 border-yellow-500";case"OFF":return"bg-gray-100 border-l-4 border-gray-500";default:return"bg-white border-l-4 border-gray-300"}}),o=(0,n.EW)(()=>{switch(t.robot.status){case"WORKING":return"text-green-600 font-bold";case"MOVING":return"text-blue-600 font-bold";case"INREST":return"text-yellow-600 font-bold";case"OFF":return"text-gray-600 font-bold";default:return"text-gray-600"}}),r=(0,n.EW)(()=>{if(t.robot.lastUpdated){const e=new Date(t.robot.lastUpdated);return e.toLocaleString()}return"N/A"});return{cardClasses:e,statusClasses:o,formattedLastUpdated:r}}},m=o(1241);const w=(0,m.A)(h,[["render",y],["__scopeId","data-v-5c3cef1e"]]);var O=w,C={name:"App",components:{RobotCard:O},setup(){const t=(0,f.KR)({}),e=(0,f.KR)(!0),o=(0,f.KR)(null);let r=null;const s=(0,n.EW)(()=>Object.values(t.value).sort((t,e)=>t.botId.localeCompare(e.botId))),a=async()=>{try{const e=await fetch("/api/robots");if(!e.ok)throw new Error(`HTTP 오류! 상태: ${e.status}`);const o=await e.json();o.forEach(e=>{const o=`${e.location.latitude},${e.location.longitude}`;t.value[e.botId]={...e,location:o}})}catch(r){console.error("초기 로봇 데이터 가져오기 실패:",r),o.value="초기 데이터를 불러오는 데 실패했습니다."}finally{e.value=!1}},l=()=>{const e="https:"===window.location.protocol?"wss:":"ws:";r=new WebSocket(`${e}//${window.location.host}/websocket`),r.onopen=()=>{console.log("WebSocket 연결 성공")},r.onmessage=e=>{try{const o=JSON.parse(e.data);console.log("WebSocket으로부터 데이터 수신:",o),t.value[o.botId]=o}catch(o){console.error("WebSocket 메시지 파싱 오류:",o)}},r.onclose=()=>{console.log("WebSocket 연결 종료. 5초 후 재연결 시도..."),setTimeout(l,5e3)},r.onerror=t=>{console.error("WebSocket 오류:",t),o.value="WebSocket 연결에 문제가 발생했습니다.",r.close()}};return(0,n.sV)(()=>{a(),l()}),(0,n.hi)(()=>{r&&r.close()}),{robots:t,loading:e,error:o,sortedRobots:s}}};const L=(0,m.A)(C,[["render",d]]);var W=L;(0,r.Ef)(W).mount("#app")}},e={};function o(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,o),s.exports}o.m=t,function(){var t=[];o.O=function(e,r,n,s){if(!r){var a=1/0;for(i=0;i<t.length;i++){r=t[i][0],n=t[i][1],s=t[i][2];for(var l=!0,c=0;c<r.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every(function(t){return o.O[t](r[c])})?r.splice(c--,1):(l=!1,s<a&&(a=s));if(l){t.splice(i--,1);var u=n();void 0!==u&&(e=u)}}return e}s=s||0;for(var i=t.length;i>0&&t[i-1][2]>s;i--)t[i]=t[i-1];t[i]=[r,n,s]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,s,a=r[0],l=r[1],c=r[2],u=0;if(a.some(function(e){return 0!==t[e]})){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(c)var i=c(o)}for(e&&e(r);u<a.length;u++)s=a[u],o.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return o.O(i)},r=self["webpackChunkfullstack_robot_app"]=self["webpackChunkfullstack_robot_app"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],function(){return o(6191)});r=o.O(r)})();
//# sourceMappingURL=app.e7983c22.js.map